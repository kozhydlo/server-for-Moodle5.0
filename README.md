# Система управління навчальним процесом

Цей репозиторій містить код для API системи управління навчальним процесом, побудованої з використанням Node.js та Express. API дозволяє керувати студентами, вчителями, предметами, класами, розкладом та пов'язаними операціями, такими як додавання та отримання оцінок, управління матеріалами та багато іншого.

## Встановлення

1. Клонування репозиторію:
    
bash
    git clone https://github.com/kozhydlo/server-for-Moodle5.0.git
    cd server-for-Moodle5.0


2. Встановлення залежностей:
    
bash
    npm install


3. Налаштування змінних середовища:
    Створіть файл .env у кореневій директорії та додайте ваші змінні середовища. Приклад:
    
env
    PORT=5000
    MONGO_URI=your_mongodb_connection_string
    JWT_SECRET=your_jwt_secret


4. Запуск серверу:
    
bash
    npm start


## Кінцеві точки API

### Кінцеві точки для користувачів та автентифікації

- **Додати оцінку**
  - **URL:** /addRating
  - **Метод:** POST
  - **Опис:** Додавання або оновлення оцінок для студента.
  - **Параметри в тілі запиту:**
    - studentName: String
    - date: Date (YYYY-MM-DD)
    - ratings: Масив об'єктів, що містять subject та ratings

- **Список студентів**
  - **URL:** /listSTUDENT
  - **Метод:** POST
  - **Опис:** Отримання списку студентів.
  - **Параметри в тілі запиту:**
    - username: String (необов'язковий)

- **Список вчителів**
  - **URL:** /listTEACHER
  - **Метод:** POST
  - **Опис:** Отримання списку вчителів.
  - **Параметри в тілі запиту:**
    - username: String (необов'язковий)

- **Видалити предмет у студента**
  - **URL:** /deleteSubject
  - **Метод:** POST
  - **Опис:** Видалення предмету у студента.
  - **Параметри в тілі запиту:**
    - username: String
    - subjectId: String

- **Додати предмет вчителю**
  - **URL:** /addSubjectToTeacher
  - **Метод:** POST
  - **Опис:** Додавання предмету вчителю.
  - **Параметри в тілі запиту:**
    - teacherName: String
    - subjectName: String

- **Список студентів за предметом**
  - **URL:** /studentsBySubject
  - **Метод:** POST
  - **Опис:** Отримання списку студентів, які записані на певний предмет.
  - **Параметри в тілі запиту:**
    - subject: String

### Кінцеві точки для предметів

- **Отримати всі предмети**
  - **URL:** /subjects
  - **Метод:** GET
  - **Опис:** Отримання списку всіх предметів.

- **Додати предмет**
  - **URL:** /subjects
  - **Метод:** POST
  - **Опис:** Додавання нового предмету.
  - **Параметри в тілі запиту:**
    - name: String

- **Видалити предмет**
  - **URL:** /subjects
  - **Метод:** DELETE
  - **Опис:** Видалення предмету.
  - **Параметри в тілі запиту:**
    - name: String

### Кінцеві точки для розкладу

- **Додати запис до розкладу**
  - **URL:** /subjects/schedule
  - **Метод:** POST
  - **Опис:** Додавання запису до розкладу для предмету.
  - **Параметри в тілі запиту:**
    - name: String
    - day: String
    - time: String

- **Видалити запис з розкладу**
  - **URL:** /subjects/schedule
  - **Метод:** DELETE
  - **Опис:** Видалення запису з розкладу для предмету.
  - **Параметри в тілі запиту:**
    - name: String
    - day: String
    - time: String

- **Отримати розклад**
  - **URL:** /subjects/schedule
  - **Метод:** GET
  - **Опис:** Отримання розкладу для предмету.
  - **Параметри в тілі запиту:**
    - name: String

### Кінцеві точки для класів

- **Створити клас**
  - **URL:** /class
  - **Метод:** POST
  - **Опис:** Створення нового класу.
  - **Параметри в тілі запиту:**
    - name: String

- **Додати студента до класу**
  - **URL:** /class/add-student
  - **Метод:** POST
  - **Опис:** Додавання студента до класу.
  - **Параметри в тілі запиту:**
    - className: String
    - studentUsername: String

- **Видалити клас**
  - **URL:** /class
  - **Метод:** DELETE
  - **Опис:** Видалення класу.
  - **Параметри в тілі запиту:**
    - name: String

- **Отримати всі класи**
  - **URL:** /class
  - **Метод:** GET
  - **Опис:** Отримання списку всіх класів.

### Кінцеві точки для оцінок

- **Отримати статистику по предмету**
  - **URL:** /subject/statistics
  - **Метод:** POST
  - **Опис:** Отримання статистики оцінок по предмету.
  - **Параметри в тілі запиту:**
    - username: String
    - password: String
    - subject: String

### Кінцеві точки для матеріалів

- **Завантажити PDF**
  - **URL:** /upload
  - **Метод:** POST
  - **Опис:** Завантаження PDF файлу.
  - **Параметри в тілі запиту:**
    - username: String
    - password: String
    - className: String
    - subject: String
    - file: PDF файл

- **Отримати матеріали**
  - **URL:** /materials
  - **Метод:** GET
  - **Опис:** Отримання списку матеріалів для конкретного класу та предмету.
  - **Параметри запиту:**
    - className: String (необов'язковий)
    - subject: String (необов'язковий)

- **Перегляд PDF**
  - **URL:** /material/:id
  - **Метод:** GET
  - **Опис:** Перегляд конкретного PDF файлу за ID.

- **Видалити PDF**
  - **URL:** /material/:id
  - **Метод:** DELETE
  - **Опис:** Видалення конкретного PDF файлу за ID.

## Middleware

API використовує декілька middleware для різних функціональностей:
- authMiddleware: Для автентифікації користувачів.
- roleMiddleware: Для авторизації користувачів на основі їх ролей.
- checkRole: Для перевірки конкретних ролей для певних маршрутів.

## Моделі

API використовує наступні моделі:
- User: Для управління інформацією про користувачів.
- Rating: Для зберігання оцінок студентів.
- Subject: Для управління предметами.
- Class: Для управління класами.
- Material: Для зберігання завантажених PDF матеріалів.

## Внесок

Внесок вітається! Будь ласка, створіть issue, щоб обговорити, що ви хочете змінити.

## Ліцензія

Цей проект ліцензований під ліцензією MIT.
